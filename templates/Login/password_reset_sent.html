<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    {% load static %}
    <meta charset="utf-8">
    <title>Password Reset Sent</title>
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
    <style>
      /* Optional: You can add a loading spinner style here if you want */
      .loading {
        text-align: center;
        padding: 20px;
        font-size: 1.2rem;
        font-weight: bold;
      }
      .timer {
        font-weight: bold;
        color: var(--primary-color);
      }
    </style>
  </head>
  <body>
    <div class="center fade-in" id="resetPage">
        <h1>Reset Email Sent</h1>
        <div id="loadingMessage" class="loading">
            Sending email... Please wait.
        </div>
        <div class="info-text" id="timerInfo" style="display: none;">
            A password reset link has been sent to your email. 
            <p class="mt-4">Please note that it <b>expires in <span id="timer" class="timer">10:00</span></b>!</p>
        </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Show the loading message while sending the email
        setTimeout(function() {
          // Simulate sending the email (you can replace this with the actual email sending process)
          document.getElementById('loadingMessage').style.display = 'none'; // Hide loading message
          document.getElementById('timerInfo').style.display = 'block'; // Show the timer info
          startTimer(); // Start the countdown timer
        }, 3000); // Simulate a 3-second delay for sending the email
      });

      // Timer function
      function startTimer() {
        var timerElement = document.getElementById('timer');
        var minutes = 10;
        var seconds = 0;

        var interval = setInterval(function() {
          if (seconds === 0 && minutes === 0) {
            clearInterval(interval); // Stop the timer when it reaches 00:00
          } else {
            if (seconds === 0) {
              minutes--;
              seconds = 59;
            } else {
              seconds--;
            }

            // Format the timer as MM:SS
            var formattedTime = (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            timerElement.textContent = formattedTime;
          }
        }, 1000); // Update every second
      }
    </script>
  </body>
</html>
